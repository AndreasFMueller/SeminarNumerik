%
% integral.tex -- template for standalon tikz images
%
% (c) 2020 Prof Dr Andreas MÃ¼ller, Hochschule Rapperswil
%
\documentclass[tikz]{standalone}
\usepackage{amsmath}
\usepackage{times}
\usepackage{txfonts}
\usepackage{pgfplots}
\usepackage{csvsimple}
\usetikzlibrary{arrows,intersections,math}
\begin{document}
\def\skala{1}
\begin{tikzpicture}[>=latex,thick,scale=\skala]

\def\xzero{2.1}
\xdef\x{\xzero}
\pgfmathparse{0.5*sin(200*\x)+2.5*cos(47*\x)+2*sin(33*\x)+0.1*cos(1000*\x)-1}
\xdef\yzero{\pgfmathresult}

\def\xone{4.5}
\xdef\x{\xone}
\pgfmathparse{0.5*sin(200*\x)+2.5*cos(47*\x)+2*sin(33*\x)+0.1*cos(1000*\x)-1}
\xdef\yone{\pgfmathresult}

\def\hintergrund#1{
        \fill[color=gray!20] ({#1-0.3},-3) rectangle ({#1+0.3},3);
        \draw ({#1-0.4},2.4)--({#1+0.4},2.4);
        \draw[->] ({#1-0.6},2.4)--({#1-0.3},2.4);
        \draw[->] ({#1+0.6},2.4)--({#1+0.3},2.4);
        \node at (#1,2.4) [above] {$2\varepsilon$};
}

\def\kurve{
	\node[color=red] at (0.5,2.7) {$g(x)$};
	\draw[color=red!20,line width=1.4pt,line join=round]
		plot[domain=-0.1:6.1,samples=100]
		({\x},{0.5*sin(200*\x)+2.5*cos(47*\x)+2*sin(33*\x)+0.1*cos(1000*\x)-1});
}
\begin{scope}[xshift=-3.5cm]
	\hintergrund{\xzero}
	\kurve
	\draw[color=red,line width=1.4pt,line join=round]
		plot[domain={\xzero-0.3}:{\xzero+0.3},samples=100]
		({\x},{0.5*sin(200*\x)+2.5*cos(47*\x)+2*sin(33*\x)+0.1*cos(1000*\x)-1});
	\fill[color=red] (\xzero,\yzero) circle[radius=0.06];
	\draw (\xzero,-0.1)--(\xzero,0.1);
	\node at (\xzero,-0.1) [below] {$\bar{x}$};
	\node[color=red] at (\xzero,\yzero) [above right] {$g(\bar{x}) > 0$};
	\draw[color=blue,line width=1.4pt,tension=0.1]
		(-0.1,0)
		-- ({\xzero-0.3},0)
		to[out=0,in=-90] ({\xzero-0.2},0.1)
		-- ({\xzero-0.1},0.9)
		to[out=90,in=180] (\xzero,1)
		to[out=0,in=90] ({\xzero+0.1},0.9)
		-- ({\xzero+0.2},0.1)
		to[out=-90,in=180] ({\xzero+0.3},0)
			-- (6,0);
	\node[color=blue] at ({\xzero-0.2},{\yzero/3}) [left] {$h(x)$};
	\draw[->] (-0.1,0)--(6.3,0) coordinate[label={$x$}];
	\draw[->] (0,-3.1)--(0,3.3) coordinate[label={right:$y$}];
\end{scope}

\begin{scope}[xshift=3.5cm]
	\hintergrund{\xone}
	\kurve
	\draw[color=red,line width=1.4pt,line join=round]
		plot[domain={\xone-0.3}:{\xone+0.3},samples=100]
		({\x},{0.5*sin(200*\x)+2.5*cos(47*\x)+2*sin(33*\x)+0.1*cos(1000*\x)-1});
	\fill[color=red] (\xone,\yone) circle[radius=0.06];
	\draw (\xone,-0.1)--(\xone,0.1);
	\node at (\xone,-0.1) [below] {$\bar{x}$};
	\node[color=red] at (\xone,\yone) [below left] {$g(\bar{x})< 0$};
	\node[color=blue] at ({\xone-0.2},{2*\yzero/3}) [left] {$h(x)$};
	\draw[color=blue,line width=1.4pt,tension=0.1]
		(-0.1,0)
		-- ({\xone-0.3},0)
		to[out=0,in=-90] ({\xone-0.2},0.1)
		-- ({\xone-0.1},0.9)
		to[out=90,in=180] (\xone,1)
		to[out=0,in=90] ({\xone+0.1},0.9)
		-- ({\xone+0.2},0.1)
		to[out=-90,in=180] ({\xone+0.3},0)
		-- (6,0);
	\draw[->] (-0.1,0)--(6.3,0) coordinate[label={$x$}];
	\draw[->] (0,-3.1)--(0,3.3) coordinate[label={right:$y$}];
\end{scope}

\end{tikzpicture}
\end{document}

